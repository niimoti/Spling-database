CREATE DATABASE moremore;
  USE moremore;

CREATE USER 'user'@'localhost' IDENTIFIED BY 'password'; 

GRANT ALL PRIVILEGES ON moremore.*
   TO user@localhost;

FLUSH PRIVILEGES;

CREATE TABLE users (
    username VARCHAR(255) PRIMARY KEY,
    password VARCHAR(255),
    role VARCHAR(255),
    email VARCHAR(255),
    name VARCHAR(255),
    sp_teacher boolean not null,
    teacher boolean not null,
    student boolean not null,
    expired_student boolean not null
);

CREATE TABLE companys (
    companysname VARCHAR(255),
    industry VARCHAR(255),
    PRIMARY KEY (companysname,industry)
);

CREATE TABLE explanation(
    companysname VARCHAR(255) PRIMARY KEY,
    reservedate DATE,
    reservedeadline DATE,
    contents VARCHAR(255),
    place VARCHAR(255),
    url VARCHAR(255),
    file VARCHAR(255),
    candidate INT,
    datetime DATETIME,
    FOREIGN KEY (companysname) REFERENCES companys(companysname)
);

CREATE TABLE reserve(
    username VARCHAR(255) ,
    companyname VARCHAR(255),
    datetime DATETIME,
    PRIMARY KEY (username,companyname),
    FOREIGN KEY (username) REFERENCES users(username),
    FOREIGN KEY (companyname) REFERENCES companys(companysname)
);

CREATE TABLE teacher(
    username VARCHAR(255) PRIMARY KEY ,
    class VARCHAR(255),
    FOREIGN KEY (username) REFERENCES users(username)
);

CREATE TABLE student(
    username VARCHAR(255) PRIMARY KEY ,
    industry VARCHAR(255),
    class VARCHAR(255),
    FOREIGN KEY (username) REFERENCES users(username)
);

CREATE TABLE expired_student(
    username    VARCHAR(255) PRIMARY KEY,
    companyname VARCHAR(255),
    FOREIGN KEY (username) REFERENCES users (username),
    FOREIGN KEY (companyname) REFERENCES companys (companysname)
);

REATE TABLE qualification(
    username VARCHAR(255) ,
    qualification VARCHAR(255),
    PRIMARY KEY (username,qualification),
    FOREIGN KEY (username) REFERENCES users(username)
);

CREATE TABLE questionnaire(
  questionnaireid VARCHAR(255),
  answerdeadline DATE,
  distributiondate DATE,
  PRIMARY KEY (questionnaireid)
);

CREATE TABLE answer(
   questionnaireid VARCHAR(255),
   username VARCHAR(255),
   companysanswer VARCHAR(255),
   progressanswer VARCHAR(255),
   PRIMARY KEY (questionnaireid,username,companysanswer),
   FOREIGN KEY (questionnaireid) REFERENCES questionnaire(questionnaireid),
   FOREIGN KEY (username) REFERENCES users(username)
);
